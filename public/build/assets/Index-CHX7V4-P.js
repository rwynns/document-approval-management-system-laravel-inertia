import{r as k,j as s,H as D,L as l,a as m}from"./app-CNJch6fJ.js";import{S as I,N as C,A as y,a as T,B as x}from"./NotificationListener-CHbz9J81.js";import{S}from"./site-header-1ZLAZI7i.js";import{B as a}from"./button-Bc8fY39k.js";import{C as M,a as H,b as _,c as A,d as B}from"./card-BdiGcNVe.js";import{D as E,a as z,b as F,c as L,d as G,e as K}from"./dialog-BDMnm7Fp.js";import{T as P,a as R,b as f,c as t,d as O,e as n}from"./table-dbNKOOTV.js";import{s as c}from"./toast-CBrN9sog.js";import{I as h}from"./IconSettings-BPFF03wv.js";import{I as U}from"./IconBuilding-CC5CCjW1.js";import{I as j}from"./IconPlus-DwaGKv2n.js";import{I as u,a as p}from"./IconX-P1OgxuHH.js";import{I as X}from"./IconEye-Bw4jvepO.js";import{I as $}from"./IconEdit-CcmCEER-.js";import{I as q}from"./IconTrash-MfoBVftz.js";/* empty css            */import"./index-BeHAPgjQ.js";import"./loader-circle-DS5R5jI-.js";import"./file-text-Cn-yV2BY.js";import"./user-BJizuUvm.js";import"./createReactComponent-CAvr32i6.js";function js({masterflows:d,company:g}){const[r,i]=k.useState({open:!1,masterflow:null}),N=e=>{i({open:!0,masterflow:e})},b=()=>{r.masterflow&&m.delete(route("admin.masterflows.destroy",r.masterflow.id),{onSuccess:()=>{c.success("Masterflow berhasil dihapus."),i({open:!1,masterflow:null})},onError:()=>{c.error("Gagal menghapus masterflow.")}})},v=e=>{m.patch(route("admin.masterflows.toggle-status",e.id),{},{onSuccess:()=>{const o=e.is_active?"dinonaktifkan":"diaktifkan";c.success(`Masterflow berhasil ${o}.`)},onError:()=>{c.error("Gagal mengubah status masterflow.")}})};return s.jsxs(s.Fragment,{children:[s.jsx(D,{title:"Masterflow Management"}),s.jsxs(I,{children:[s.jsx(C,{}),s.jsx(y,{variant:"inset"}),s.jsxs(T,{children:[s.jsx(S,{}),s.jsx("div",{className:"flex flex-1 flex-col",children:s.jsx("div",{className:"@container/main flex flex-1 flex-col gap-2 p-6",children:s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsxs("h1",{className:"flex items-center gap-2 font-serif text-2xl font-bold tracking-tight text-foreground",children:[s.jsx(h,{className:"h-6 w-6 text-primary"}),"Masterflow Management"]}),s.jsxs("p",{className:"flex items-center gap-2 font-sans text-sm text-muted-foreground",children:[s.jsx(U,{className:"h-4 w-4"}),g?.name||"Unknown Company"]})]}),s.jsx(l,{href:route("admin.masterflows.create"),children:s.jsxs(a,{className:"font-sans",children:[s.jsx(j,{className:"mr-2 h-4 w-4"}),"Tambah Masterflow"]})})]}),s.jsxs(M,{className:"border-border bg-card",children:[s.jsxs(H,{children:[s.jsx(_,{className:"font-serif text-foreground",children:"Daftar Masterflow"}),s.jsx(A,{className:"font-sans",children:"Kelola template skema approval dokumen untuk company Anda."})]}),s.jsx(B,{children:d.length===0?s.jsxs("div",{className:"py-8 text-center",children:[s.jsx(h,{className:"mx-auto h-12 w-12 text-muted-foreground"}),s.jsx("h3",{className:"mt-4 font-sans text-lg font-semibold",children:"Belum ada masterflow"}),s.jsx("p",{className:"mt-2 font-sans text-sm text-muted-foreground",children:"Mulai dengan membuat masterflow pertama untuk company Anda."}),s.jsx("div",{className:"mt-4",children:s.jsx(l,{href:route("admin.masterflows.create"),children:s.jsxs(a,{className:"font-sans",children:[s.jsx(j,{className:"mr-2 h-4 w-4"}),"Tambah Masterflow"]})})})]}):s.jsxs(P,{children:[s.jsx(R,{children:s.jsxs(f,{children:[s.jsx(t,{className:"font-sans font-semibold text-foreground",children:"Nama"}),s.jsx(t,{className:"font-sans font-semibold text-foreground",children:"Deskripsi"}),s.jsx(t,{className:"font-sans font-semibold text-foreground",children:"Total Steps"}),s.jsx(t,{className:"font-sans font-semibold text-foreground",children:"Status"}),s.jsx(t,{className:"font-sans font-semibold text-foreground",children:"Dibuat"}),s.jsx(t,{className:"text-right font-sans font-semibold text-foreground",children:"Aksi"})]})}),s.jsx(O,{children:d.map(e=>s.jsxs(f,{children:[s.jsx(n,{className:"font-sans font-medium text-foreground",children:s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold",children:e.name}),s.jsx("div",{className:"text-sm text-muted-foreground",children:e.steps.map((o,w)=>s.jsxs("span",{children:[o.jabatan.name,w<e.steps.length-1&&" â†’ "]},o.id))})]})}),s.jsx(n,{className:"font-sans text-muted-foreground",children:e.description||s.jsx("span",{className:"text-muted-foreground",children:"-"})}),s.jsx(n,{children:s.jsx(x,{variant:"secondary",className:"font-sans",children:e.total_steps})}),s.jsx(n,{children:s.jsx(x,{variant:e.is_active?"default":"secondary",className:e.is_active?"bg-green-100 font-sans text-green-800 hover:bg-green-200":"font-sans",children:e.is_active?s.jsxs(s.Fragment,{children:[s.jsx(u,{className:"mr-1 h-3 w-3"}),"Aktif"]}):s.jsxs(s.Fragment,{children:[s.jsx(p,{className:"mr-1 h-3 w-3"}),"Nonaktif"]})})}),s.jsx(n,{className:"font-sans text-muted-foreground",children:new Date(e.created_at).toLocaleDateString("id-ID")}),s.jsx(n,{className:"text-right",children:s.jsxs("div",{className:"flex items-center justify-end gap-2",children:[s.jsx(l,{href:route("admin.masterflows.show",e.id),children:s.jsx(a,{variant:"ghost",size:"sm",children:s.jsx(X,{className:"h-4 w-4"})})}),s.jsx(l,{href:route("admin.masterflows.edit",e.id),children:s.jsx(a,{variant:"ghost",size:"sm",children:s.jsx($,{className:"h-4 w-4"})})}),s.jsx(a,{variant:"ghost",size:"sm",onClick:()=>v(e),children:e.is_active?s.jsx(p,{className:"h-4 w-4"}):s.jsx(u,{className:"h-4 w-4"})}),s.jsx(a,{variant:"ghost",size:"sm",onClick:()=>N(e),children:s.jsx(q,{className:"h-4 w-4"})})]})})]},e.id))})]})})]})]})})}),s.jsx(E,{open:r.open,onOpenChange:e=>i({...r,open:e}),children:s.jsxs(z,{children:[s.jsxs(F,{children:[s.jsx(L,{className:"font-serif",children:"Konfirmasi Hapus"}),s.jsxs(G,{className:"font-sans",children:['Apakah Anda yakin ingin menghapus masterflow "',r.masterflow?.name,'"? Tindakan ini tidak dapat dibatalkan.']})]}),s.jsxs(K,{children:[s.jsx(a,{variant:"outline",onClick:()=>i({open:!1,masterflow:null}),className:"font-sans",children:"Batal"}),s.jsx(a,{variant:"destructive",onClick:b,className:"font-sans",children:"Hapus"})]})]})})]})]})]})}export{js as default};
