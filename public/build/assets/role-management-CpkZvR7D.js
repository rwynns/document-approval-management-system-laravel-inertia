import{r as x,b as H,j as e,H as z}from"./app-CNJch6fJ.js";import{B as P}from"./NotificationListener-CHbz9J81.js";import{B as t}from"./button-Bc8fY39k.js";import{C as g,a as N,b,c as y,d as w}from"./card-BdiGcNVe.js";import{I as F}from"./input-L_-VHgZB.js";import{L as K}from"./label-Ch3Qpvdb.js";import{T as O,a as q,b as p,c as l,d as G,e as a}from"./table-dbNKOOTV.js";import{A as J}from"./app-layout-VNzkGBAB.js";import{I as Q}from"./IconShield-VS74m0Xt.js";import{A as U}from"./activity-5R1ujG4d.js";import{I as V}from"./IconPlus-DwaGKv2n.js";import{I as W}from"./IconEdit-CcmCEER-.js";import{I as X}from"./IconTrash-MfoBVftz.js";/* empty css            */import"./index-BeHAPgjQ.js";import"./loader-circle-DS5R5jI-.js";import"./file-text-Cn-yV2BY.js";import"./user-BJizuUvm.js";import"./chevron-right-D5vTS9_Z.js";import"./createReactComponent-CAvr32i6.js";const Y=[{title:"Dashboard",href:"/dashboard"},{title:"Role Management",href:"/role-management"}];function ge({roles:v=[]}){const[h,C]=x.useState(v),[D,r]=x.useState(!1),[n,i]=x.useState(null);x.useEffect(()=>{const s=window.Echo?.channel("role-management");return s&&s.listen("role.updated",A=>{const{action:L,role:c}=A;C(d=>{switch(L){case"created":return[...d,c];case"updated":return d.map(m=>m.id===c.id?c:m);case"deleted":return d.filter(m=>m.id!==c.id);default:return d}})}),()=>{s&&s.stopListening("role.updated")}},[]);const{data:I,setData:u,post:k,put:R,delete:_,processing:f,errors:j,reset:o}=H({role_name:""}),S=s=>{s.preventDefault(),n?R(route("role-management.update",n.id),{onSuccess:()=>{i(null),o()}}):k(route("role-management.store"),{onSuccess:()=>{r(!1),o()}})},T=s=>{i(s),u("role_name",s.role_name),r(!0)},M=s=>{confirm("Apakah Anda yakin ingin menghapus role ini?")&&_(route("role-management.destroy",s))},B=()=>{i(null),o(),r(!0)},E=()=>{r(!1),i(null),o()};return e.jsxs(J,{breadcrumbs:Y,children:[e.jsx(z,{title:"Role Management"}),e.jsxs("div",{className:"flex min-h-screen flex-1 flex-col bg-white",children:[e.jsxs("div",{className:"@container/main flex flex-1 flex-col",children:[e.jsx("div",{className:"px-4 py-6 lg:px-6",children:e.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("h1",{className:"flex items-center gap-2 font-serif text-2xl font-bold tracking-tight text-gray-900",children:[e.jsx(Q,{className:"h-6 w-6 text-primary"}),"Role Management"]}),e.jsx("p",{className:"font-sans text-gray-600",children:"Kelola dan atur role pengguna dalam sistem"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(P,{variant:"outline",className:"gap-1 border-green-300 bg-green-50 font-sans text-green-700",children:[e.jsx(U,{className:"h-3 w-3"}),h.length," Roles"]}),e.jsxs(t,{onClick:B,className:"gap-2 font-sans",children:[e.jsx(V,{className:"h-4 w-4"}),"Tambah Role"]})]})]})}),e.jsx("div",{className:"flex-1 px-4 pb-6 lg:px-6",children:e.jsxs(g,{children:[e.jsxs(N,{children:[e.jsx(b,{className:"font-serif",children:"Daftar Role"}),e.jsx(y,{className:"font-sans",children:"Kelola role pengguna yang tersedia dalam sistem"})]}),e.jsx(w,{children:e.jsxs(O,{children:[e.jsx(q,{children:e.jsxs(p,{children:[e.jsx(l,{className:"font-sans",children:"ID"}),e.jsx(l,{className:"font-sans",children:"Nama Role"}),e.jsx(l,{className:"font-sans",children:"Dibuat"}),e.jsx(l,{className:"font-sans",children:"Diperbarui"}),e.jsx(l,{className:"text-right font-sans",children:"Aksi"})]})}),e.jsx(G,{children:h.length>0?h.map(s=>e.jsxs(p,{children:[e.jsx(a,{className:"font-mono",children:s.id}),e.jsx(a,{className:"font-sans font-medium",children:s.role_name}),e.jsx(a,{className:"font-sans",children:new Date(s.created_at).toLocaleDateString("id-ID")}),e.jsx(a,{className:"font-sans",children:new Date(s.updated_at).toLocaleDateString("id-ID")}),e.jsx(a,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(t,{variant:"outline",size:"sm",onClick:()=>T(s),className:"h-8 w-8 p-0",children:e.jsx(W,{className:"h-4 w-4"})}),e.jsx(t,{variant:"outline",size:"sm",onClick:()=>M(s.id),className:"h-8 w-8 border-red-300 p-0 text-red-600 hover:bg-red-50",children:e.jsx(X,{className:"h-4 w-4"})})]})})]},s.id)):e.jsx(p,{children:e.jsx(a,{colSpan:5,className:"py-8 text-center font-sans text-gray-500",children:"Belum ada role yang tersedia"})})})]})})]})})]}),D&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:e.jsxs(g,{className:"mx-4 w-full max-w-md",children:[e.jsxs(N,{children:[e.jsx(b,{className:"font-serif",children:n?"Edit Role":"Tambah Role Baru"}),e.jsx(y,{className:"font-sans",children:n?"Perbarui informasi role":"Tambahkan role baru ke sistem"})]}),e.jsx(w,{children:e.jsxs("form",{onSubmit:S,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"role_name",className:"font-sans",children:"Nama Role"}),e.jsx(F,{id:"role_name",value:I.role_name,onChange:s=>u("role_name",s.target.value),placeholder:"Masukkan nama role",className:"font-sans",required:!0}),j.role_name&&e.jsx("p",{className:"font-sans text-sm text-red-600",children:j.role_name})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(t,{type:"button",variant:"outline",onClick:E,disabled:f,className:"font-sans",children:"Batal"}),e.jsx(t,{type:"submit",disabled:f,className:"font-sans",children:f?"Menyimpan...":n?"Perbarui":"Simpan"})]})]})})]})})]})]})}export{ge as default};
