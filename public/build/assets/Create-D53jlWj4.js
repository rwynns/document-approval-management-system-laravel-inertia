import{r as p,j as s,H as D,L as x,a as T}from"./app-CNJch6fJ.js";import{S as M,N as A,A as P,a as B}from"./NotificationListener-CHbz9J81.js";import{S as F}from"./site-header-1ZLAZI7i.js";import{B as l}from"./button-Bc8fY39k.js";import{C as j,a as u,b as g,c as N,d as b}from"./card-BdiGcNVe.js";import{I as v}from"./input-L_-VHgZB.js";import{L as c}from"./label-Ch3Qpvdb.js";import{S as E,a as H,b as $,c as J,d as q}from"./select-DahuNLv9.js";import{T as w}from"./textarea-2ialuiXC.js";import{s as S}from"./toast-CBrN9sog.js";import{I as z}from"./IconSettings-BPFF03wv.js";import{I as R}from"./IconBuilding-CC5CCjW1.js";import{I as V}from"./IconArrowLeft-BrOCw4-V.js";import{I as G}from"./IconPlus-DwaGKv2n.js";import{I as K}from"./IconTrash-MfoBVftz.js";/* empty css            */import"./index-BeHAPgjQ.js";import"./loader-circle-DS5R5jI-.js";import"./file-text-Cn-yV2BY.js";import"./user-BJizuUvm.js";import"./createReactComponent-CAvr32i6.js";function hs({jabatans:y,company:k}){const[a,o]=p.useState({name:"",description:"",is_active:!0,steps:[{step_order:1,step_name:"",description:"",is_required:!0,jabatan_id:0}]}),[n,_]=p.useState({}),[f,h]=p.useState(!1),C=()=>{o({...a,steps:[...a.steps,{step_order:a.steps.length+1,step_name:"",description:"",is_required:!0,jabatan_id:0}]})},I=e=>{const r=a.steps.filter((i,d)=>d!==e).map((i,d)=>({...i,step_order:d+1}));o({...a,steps:r})},m=(e,t,r)=>{const i=[...a.steps];i[e]={...i[e],[t]:r},o({...a,steps:i})},L=e=>{e.preventDefault(),h(!0),T.post(route("admin.masterflows.store"),a,{onSuccess:()=>{S.success("Masterflow berhasil dibuat.")},onError:t=>{_(t),S.error("Gagal membuat masterflow. Periksa form Anda.")},onFinish:()=>h(!1)})};return s.jsxs(s.Fragment,{children:[s.jsx(D,{title:"Tambah Masterflow"}),s.jsxs(M,{children:[s.jsx(A,{}),s.jsx(P,{variant:"inset"}),s.jsxs(B,{children:[s.jsx(F,{}),s.jsx("div",{className:"flex flex-1 flex-col",children:s.jsx("div",{className:"@container/main flex flex-1 flex-col gap-2 p-6",children:s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsxs("h1",{className:"flex items-center gap-2 font-serif text-2xl font-bold tracking-tight text-foreground",children:[s.jsx(z,{className:"h-6 w-6 text-primary"}),"Tambah Masterflow"]}),s.jsxs("p",{className:"flex items-center gap-2 font-sans text-sm text-muted-foreground",children:[s.jsx(R,{className:"h-4 w-4"}),k?.name||"Unknown Company"]})]}),s.jsx(x,{href:route("admin.masterflows.index"),children:s.jsxs(l,{variant:"outline",className:"font-sans",children:[s.jsx(V,{className:"mr-2 h-4 w-4"}),"Kembali"]})})]}),s.jsxs("form",{onSubmit:L,className:"space-y-6",children:[s.jsxs(j,{className:"border-border bg-card",children:[s.jsxs(u,{children:[s.jsx(g,{className:"font-serif text-foreground",children:"Informasi Masterflow"}),s.jsx(N,{className:"font-sans",children:"Isi informasi dasar untuk masterflow baru."})]}),s.jsxs(b,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(c,{htmlFor:"name",className:"font-sans",children:"Nama Masterflow *"}),s.jsx(v,{id:"name",value:a.name,onChange:e=>o({...a,name:e.target.value}),placeholder:"Contoh: Approval Surat Permohonan",className:"font-sans"}),n.name&&s.jsx("p",{className:"font-sans text-sm text-red-600",children:n.name})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(c,{htmlFor:"description",className:"font-sans",children:"Deskripsi"}),s.jsx(w,{id:"description",value:a.description,onChange:e=>o({...a,description:e.target.value}),placeholder:"Deskripsi singkat tentang masterflow ini",rows:3,className:"font-sans"}),n.description&&s.jsx("p",{className:"font-sans text-sm text-red-600",children:n.description})]})]})]}),s.jsxs(j,{className:"border-border bg-card",children:[s.jsx(u,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(g,{className:"font-serif text-foreground",children:"Langkah Approval"}),s.jsx(N,{className:"font-sans",children:"Definisikan urutan langkah approval yang diperlukan."})]}),s.jsxs(l,{type:"button",onClick:C,variant:"outline",size:"sm",className:"font-sans",children:[s.jsx(G,{className:"mr-2 h-4 w-4"}),"Tambah Langkah"]})]})}),s.jsxs(b,{className:"space-y-4",children:[a.steps.map((e,t)=>s.jsxs("div",{className:"space-y-4 rounded-lg border border-border p-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h4",{className:"font-sans font-semibold text-foreground",children:["Langkah ",e.step_order]}),a.steps.length>1&&s.jsx(l,{type:"button",variant:"ghost",size:"sm",onClick:()=>I(t),children:s.jsx(K,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(c,{className:"font-sans",children:"Nama Langkah *"}),s.jsx(v,{value:e.step_name,onChange:r=>m(t,"step_name",r.target.value),placeholder:"Contoh: Review Manager",className:"font-sans"}),n[`steps.${t}.step_name`]&&s.jsx("p",{className:"font-sans text-sm text-red-600",children:n[`steps.${t}.step_name`]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(c,{className:"font-sans",children:"Jabatan yang Bertanggung Jawab *"}),s.jsxs(E,{value:e.jabatan_id.toString(),onValueChange:r=>m(t,"jabatan_id",parseInt(r)),children:[s.jsx(H,{className:"font-sans",children:s.jsx($,{placeholder:"Pilih Jabatan"})}),s.jsx(J,{children:y.map(r=>s.jsx(q,{value:r.id.toString(),className:"font-sans",children:r.name},r.id))})]}),n[`steps.${t}.jabatan_id`]&&s.jsx("p",{className:"font-sans text-sm text-red-600",children:n[`steps.${t}.jabatan_id`]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(c,{className:"font-sans",children:"Deskripsi Langkah"}),s.jsx(w,{value:e.description,onChange:r=>m(t,"description",r.target.value),placeholder:"Deskripsi tentang apa yang dilakukan pada langkah ini",rows:2,className:"font-sans"})]})]},t)),n.steps&&s.jsx("p",{className:"font-sans text-sm text-red-600",children:n.steps})]})]}),s.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[s.jsx(x,{href:route("admin.masterflows.index"),children:s.jsx(l,{type:"button",variant:"outline",className:"font-sans",children:"Batal"})}),s.jsx(l,{type:"submit",disabled:f,className:"font-sans",children:f?"Menyimpan...":"Simpan Masterflow"})]})]})]})})})]})]})]})}export{hs as default};
